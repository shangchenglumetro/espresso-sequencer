<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="LeafStreamRetriever is a general trait that allows for the retrieval of a list of Leaves from a source. The specific implementation doesn’t care about the source, only that it is able to retrieve a stream of Leaves."><title>LeafStreamRetriever in node_metrics::api::node_validator::v0 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-42caa33d.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="node_metrics" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.1 (e71f9a9a9 2025-01-27)" data-channel="1.84.1" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../node_metrics/index.html">node_<wbr>metrics</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Leaf<wbr>Stream<wbr>Retriever</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Error" title="Error">Error</a></li><li><a href="#associatedtype.Future" title="Future">Future</a></li><li><a href="#associatedtype.Item" title="Item">Item</a></li><li><a href="#associatedtype.ItemError" title="ItemError">ItemError</a></li><li><a href="#associatedtype.Stream" title="Stream">Stream</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.retrieve_stream" title="retrieve_stream">retrieve_stream</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In node_<wbr>metrics::<wbr>api::<wbr>node_<wbr>validator::<wbr>v0</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../../index.html">node_metrics</a>::<wbr><a href="../../index.html">api</a>::<wbr><a href="../index.html">node_validator</a>::<wbr><a href="index.html">v0</a></span><h1>Trait <span class="trait">LeafStreamRetriever</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#425-440">Source</a> </span></div><pre class="rust item-decl"><code>pub trait LeafStreamRetriever: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> {
    type <a href="#associatedtype.Item" class="associatedtype">Item</a>;
    type <a href="#associatedtype.ItemError" class="associatedtype">ItemError</a>: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>;
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>;
    type <a href="#associatedtype.Stream" class="associatedtype">Stream</a>: Stream&lt;Item = <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Item" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Item">Item</a>, Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.ItemError" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::ItemError">ItemError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>;
    type <a href="#associatedtype.Future" class="associatedtype">Future</a>: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Stream" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Stream">Stream</a>, Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Error" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>;

    // Required method
    fn <a href="#tymethod.retrieve_stream" class="fn">retrieve_stream</a>(&amp;self, current_block_height: <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.84.1/std/primitive.u64.html">u64</a>&gt;) -&gt; Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Future" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Future">Future</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>LeafStreamRetriever is a general trait that allows for the retrieval of a
list of Leaves from a source. The specific implementation doesn’t care about
the source, only that it is able to retrieve a stream of Leaves.</p>
<p>This allows us to swap the implementation of the <a href="trait.LeafStreamRetriever.html" title="trait node_metrics::api::node_validator::v0::LeafStreamRetriever">LeafStreamRetriever</a> for
testing purposes, or for newer sources in the future.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><section id="associatedtype.Item" class="method"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#426">Source</a><h4 class="code-header">type <a href="#associatedtype.Item" class="associatedtype">Item</a></h4></section><section id="associatedtype.ItemError" class="method"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#427">Source</a><h4 class="code-header">type <a href="#associatedtype.ItemError" class="associatedtype">ItemError</a>: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a></h4></section><section id="associatedtype.Error" class="method"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#428">Source</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a></h4></section><section id="associatedtype.Stream" class="method"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#429">Source</a><h4 class="code-header">type <a href="#associatedtype.Stream" class="associatedtype">Stream</a>: Stream&lt;Item = <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Item" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Item">Item</a>, Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.ItemError" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::ItemError">ItemError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a></h4></section><section id="associatedtype.Future" class="method"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#430">Source</a><h4 class="code-header">type <a href="#associatedtype.Future" class="associatedtype">Future</a>: <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Stream" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Stream">Stream</a>, Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Error" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a></h4></section></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.retrieve_stream" class="method"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#439">Source</a><h4 class="code-header">fn <a href="#tymethod.retrieve_stream" class="fn">retrieve_stream</a>(&amp;self, current_block_height: <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.84.1/std/primitive.u64.html">u64</a>&gt;) -&gt; Self::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Future" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Future">Future</a></h4></section></summary><div class="docblock"><p>[retrieve_stream] retrieves a stream of [Leaf]s from the source.  It
expects the current block height to be provided so that it can determine
the starting block height to retrieve the stream of [Leaf]s from.</p>
<p>It should check the current height of the chain so that it only needs
to retrieve the number of older blocks that are needed, instead of
starting from the beginning of time.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-LeafStreamRetriever-for-HotshotQueryServiceLeafStreamRetriever" class="impl"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#463-514">Source</a><a href="#impl-LeafStreamRetriever-for-HotshotQueryServiceLeafStreamRetriever" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.LeafStreamRetriever.html" title="trait node_metrics::api::node_validator::v0::LeafStreamRetriever">LeafStreamRetriever</a> for <a class="struct" href="struct.HotshotQueryServiceLeafStreamRetriever.html" title="struct node_metrics::api::node_validator::v0::HotshotQueryServiceLeafStreamRetriever">HotshotQueryServiceLeafStreamRetriever</a></h3></section></summary><div class="impl-items"><section id="associatedtype.Item-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#464">Source</a><a href="#associatedtype.Item-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Item" class="associatedtype">Item</a> = Leaf&lt;<a class="struct" href="../../../../espresso_types/v0/struct.SeqTypes.html" title="struct espresso_types::v0::SeqTypes">SeqTypes</a>&gt;</h4></section><section id="associatedtype.ItemError-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#465">Source</a><a href="#associatedtype.ItemError-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ItemError" class="associatedtype">ItemError</a> = Error</h4></section><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#466">Source</a><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = Error</h4></section><section id="associatedtype.Stream-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#467-472">Source</a><a href="#associatedtype.Stream-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Stream" class="associatedtype">Stream</a> = Connection&lt;Leaf&lt;<a class="struct" href="../../../../espresso_types/v0/struct.SeqTypes.html" title="struct espresso_types::v0::SeqTypes">SeqTypes</a>&gt;, Unsupported, &lt;<a class="struct" href="struct.HotshotQueryServiceLeafStreamRetriever.html" title="struct node_metrics::api::node_validator::v0::HotshotQueryServiceLeafStreamRetriever">HotshotQueryServiceLeafStreamRetriever</a> as <a class="trait" href="trait.LeafStreamRetriever.html" title="trait node_metrics::api::node_validator::v0::LeafStreamRetriever">LeafStreamRetriever</a>&gt;::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.ItemError" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::ItemError">ItemError</a>, StaticVersion&lt;VERSION_MAJ, VERSION_MIN&gt;&gt;</h4></section><section id="associatedtype.Future-1" class="associatedtype trait-impl"><a class="src rightside" href="../../../../src/node_metrics/api/node_validator/v0/mod.rs.html#473">Source</a><a href="#associatedtype.Future-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Future" class="associatedtype">Future</a> = <a class="struct" href="https://doc.rust-lang.org/1.84.1/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.84.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.84.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;&lt;<a class="struct" href="struct.HotshotQueryServiceLeafStreamRetriever.html" title="struct node_metrics::api::node_validator::v0::HotshotQueryServiceLeafStreamRetriever">HotshotQueryServiceLeafStreamRetriever</a> as <a class="trait" href="trait.LeafStreamRetriever.html" title="trait node_metrics::api::node_validator::v0::LeafStreamRetriever">LeafStreamRetriever</a>&gt;::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Stream" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Stream">Stream</a>, &lt;<a class="struct" href="struct.HotshotQueryServiceLeafStreamRetriever.html" title="struct node_metrics::api::node_validator::v0::HotshotQueryServiceLeafStreamRetriever">HotshotQueryServiceLeafStreamRetriever</a> as <a class="trait" href="trait.LeafStreamRetriever.html" title="trait node_metrics::api::node_validator::v0::LeafStreamRetriever">LeafStreamRetriever</a>&gt;::<a class="associatedtype" href="trait.LeafStreamRetriever.html#associatedtype.Error" title="type node_metrics::api::node_validator::v0::LeafStreamRetriever::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.84.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>&gt;&gt;</h4></section></div></details></div><script src="../../../../trait.impl/node_metrics/api/node_validator/v0/trait.LeafStreamRetriever.js" async></script></section></div></main></body></html>